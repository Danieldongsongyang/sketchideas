<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sketch Ideas ‚Äî Visual Slot Machine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:wght@400;500;600;700&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cream': '#f5f0e6',
                        'cream-light': '#faf8f3',
                        'cream-dark': '#e8dfd8',
                        'warm-orange': '#e67e5c',
                        'coral': '#ff6b4a',
                        'coral-light': '#ff8a6e',
                        'charcoal': '#2d2a2e',
                        'soft-black': '#1a1a1a',
                        'warm-gray': '#8a8580',
                        'light-brown': '#c4b5a0',
                    },
                    fontFamily: {
                        'serif': ['"DM Serif Display"', 'serif'],
                        'sans': ['"Inter"', 'sans-serif'],
                        'mono': ['"JetBrains Mono"', 'monospace'],
                    },
                    animation: {
                        'slot-spin': 'slotSpin 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)',
                        'pulse-glow': 'pulseGlow 2.5s ease-in-out infinite',
                        'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
                        'spark': 'spark 0.6s ease-out forwards',
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        slotSpin: {
                            '0%': { transform: 'translateY(0) scale(1)', opacity: '1' },
                            '25%': { transform: 'translateY(-20px) scale(0.98)', opacity: '0.9' },
                            '50%': { transform: 'translateY(20px) scale(0.98)', opacity: '0.9' },
                            '75%': { transform: 'translateY(-10px) scale(0.99)', opacity: '0.95' },
                            '100%': { transform: 'translateY(0) scale(1)', opacity: '1' },
                        },
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 30px rgba(230, 126, 92, 0.3), 0 0 60px rgba(255, 107, 74, 0.2)' },
                            '50%': { boxShadow: '0 0 50px rgba(230, 126, 92, 0.5), 0 0 100px rgba(255, 107, 74, 0.35)' },
                        },
                        shake: {
                            '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                            '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                            '30%, 50%, 70%': { transform: 'translate3d(-3px, 0, 0)' },
                            '40%, 60%': { transform: 'translate3d(3px, 0, 0)' },
                        },
                        spark: {
                            '0%': { transform: 'scale(0) rotate(0deg)', opacity: '1' },
                            '100%': { transform: 'scale(1.5) rotate(180deg)', opacity: '0' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                    },
                }
            }
        }
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            overflow: hidden;
            background: linear-gradient(135deg, #f5f0e6 0%, #e8dfd8 50%, #f5f0e6 100%);
        }
        .paper-texture {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.4;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paper'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.04' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paper)'/%3E%3C/svg%3E");
        }
        .warm-border {
            position: relative;
        }
        .warm-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #e67e5c, #ff6b4a, #c4b5a0, #e67e5c);
            background-size: 300% 300%;
            animation: gradientShift 6s ease infinite;
            z-index: -1;
            border-radius: inherit;
        }
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .slot-window {
            background: linear-gradient(145deg, #faf8f3 0%, #f5f0e6 50%, #e8dfd8 100%);
            border: 2px solid #c4b5a0;
            box-shadow:
                0 20px 60px rgba(45, 42, 46, 0.15),
                0 8px 24px rgba(45, 42, 46, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
        .filter-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(196, 181, 160, 0.3);
            box-shadow: 0 4px 12px rgba(45, 42, 46, 0.08);
        }
        .btn-primary {
            background: linear-gradient(135deg, #ff6b4a 0%, #e67e5c 100%);
            color: #faf8f3;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(230, 126, 92, 0.3);
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #ff8a6e 0%, #ff6b4a 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(230, 126, 92, 0.4);
        }
        .btn-primary:active {
            transform: translateY(0);
        }
        .filter-chip {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.5);
        }
        .filter-chip:hover {
            transform: translateY(-1px);
            background: rgba(255, 255, 255, 0.8);
        }
        .filter-chip.active {
            background: linear-gradient(135deg, #e67e5c 0%, #ff6b4a 100%);
            color: #faf8f3;
            box-shadow: 0 4px 12px rgba(230, 126, 92, 0.3);
        }
        .prompt-text {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(90deg, #e67e5c, #c4b5a0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .spark-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            pointer-events: none;
        }
        .action-bar {
            background: rgba(250, 248, 243, 0.9);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(196, 181, 160, 0.3);
            box-shadow: 0 -4px 20px rgba(45, 42, 46, 0.1);
        }
        .btn-secondary {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(196, 181, 160, 0.4);
            color: #2d2a2e;
            transition: all 0.2s ease;
        }
        .btn-secondary:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.9);
            border-color: #e67e5c;
        }
        .btn-secondary:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .sketch-frame {
            border: 3px solid #c4b5a0;
            box-shadow:
                0 8px 32px rgba(45, 42, 46, 0.15),
                inset 0 0 0 1px rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col font-sans text-charcoal">
    <!-- Paper Texture Overlay -->
    <div class="paper-texture"></div>

    <!-- Spark Container -->
    <div id="sparkContainer" class="fixed inset-0 pointer-events-none z-50"></div>

    <!-- Header -->
    <header class="relative z-10 flex items-center justify-between px-6 py-4">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-warm-orange to-coral flex items-center justify-center warm-border shadow-lg">
                <img src="https://unpkg.com/lucide-static@latest/icons/sparkles.svg" alt="" class="w-5 h-5 text-white">
            </div>
            <h1 class="font-serif text-2xl font-semibold tracking-wide">
                <span class="text-warm-orange">SKETCH</span>
                <span class="text-coral">IDEAS</span>
            </h1>
        </div>
        <div class="flex items-center gap-4">
            <!-- Session Stats Mini -->
            <div class="flex items-center gap-3 text-sm font-medium">
                <div class="flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white/60">
                    <span class="text-warm-gray">Spins:</span>
                    <span id="spinsCount" class="text-warm-orange font-bold">0</span>
                </div>
                <div class="flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white/60">
                    <span class="text-warm-gray">Saved:</span>
                    <span id="savedCount" class="text-coral font-bold">0</span>
                </div>
            </div>
            <div class="flex items-center gap-2 text-xs font-mono text-warm-gray">
                <span class="w-2 h-2 rounded-full bg-coral animate-pulse"></span>
                <span>READY</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="relative z-10 flex-1 flex flex-col min-h-0">

        <!-- Top Section: Filters + Slot Machine -->
        <div class="flex-1 grid grid-cols-12 gap-6 px-6 py-4 min-h-0">

            <!-- Left Panel - Filters -->
            <div class="col-span-2 flex flex-col gap-3 min-h-0">

                <!-- Difficulty Filter -->
                <div class="filter-card rounded-2xl p-4">
                    <div class="flex items-center gap-2 mb-3">
                        <img src="https://unpkg.com/lucide-static@latest/icons/target.svg" alt="" class="w-4 h-4 text-warm-orange">
                        <span class="text-xs font-mono uppercase tracking-wider text-warm-gray">Difficulty</span>
                    </div>
                    <div class="flex flex-col gap-2" id="difficultyFilters">
                        <button class="filter-chip active px-3 py-2 rounded-xl text-sm font-semibold text-left" data-difficulty="warmup">
                            <span class="flex items-center justify-between">
                                <span>üî• Warm-up</span>
                            </span>
                        </button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-difficulty="sketch">
                            <span class="flex items-center justify-between">
                                <span>‚úèÔ∏è Sketch</span>
                            </span>
                        </button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-difficulty="challenge">
                            <span class="flex items-center justify-between">
                                <span>‚ö° Challenge</span>
                            </span>
                        </button>
                    </div>
                </div>

                <!-- Category Filter -->
                <div class="filter-card rounded-2xl p-4 flex-1 min-h-0 overflow-hidden flex flex-col">
                    <div class="flex items-center gap-2 mb-3">
                        <img src="https://unpkg.com/lucide-static@latest/icons/layer.svg" alt="" class="w-4 h-4 text-coral">
                        <span class="text-xs font-mono uppercase tracking-wider text-warm-gray">Category</span>
                    </div>
                    <div class="flex flex-col gap-2 overflow-y-auto pr-1" id="categoryFilters">
                        <button class="filter-chip active px-3 py-2 rounded-xl text-sm font-semibold text-left" data-category="objects">Objects</button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-category="animals">Animals</button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-category="characters">Characters</button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-category="poses">Poses</button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-category="landscape">Landscape</button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-category="architecture">Architecture</button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-category="scifi">Sci-Fi</button>
                        <button class="filter-chip px-3 py-2 rounded-xl text-sm font-semibold text-left text-charcoal" data-category="fantasy">Fantasy</button>
                    </div>
                </div>
            </div>

            <!-- Center Panel - Slot Machine -->
            <div class="col-span-10 flex flex-col min-h-0">

                <!-- Slot Machine Display -->
                <div class="slot-window rounded-3xl p-8 flex-1 flex flex-col min-h-0 relative overflow-hidden">

                    <!-- Decorative Corner Elements -->
                    <div class="absolute top-6 left-6 w-16 h-16 border-t-4 border-l-4 border-warm-orange/40 rounded-tl-2xl"></div>
                    <div class="absolute top-6 right-6 w-16 h-16 border-t-4 border-r-4 border-coral/40 rounded-tr-2xl"></div>
                    <div class="absolute bottom-6 left-6 w-16 h-16 border-b-4 border-l-4 border-light-brown/40 rounded-bl-2xl"></div>
                    <div class="absolute bottom-6 right-6 w-16 h-16 border-b-4 border-r-4 border-warm-orange/40 rounded-br-2xl"></div>

                    <!-- Result Display -->
                    <div id="resultDisplay" class="flex-1 flex flex-col items-center justify-center min-h-0">

                        <!-- Placeholder State -->
                        <div id="placeholderState" class="text-center">
                            <div class="w-36 h-36 mx-auto mb-8 rounded-full bg-gradient-to-br from-warm-orange/20 to-coral/20 flex items-center justify-center animate-float">
                                <img src="https://unpkg.com/lucide-static@latest/icons/dice-3.svg" alt="" class="w-16 h-16 text-warm-orange">
                            </div>
                            <p class="text-charcoal font-serif text-xl mb-2">Ready to spark your creativity?</p>
                            <p class="text-warm-gray text-sm">Select difficulty & category, then hit SPIN</p>
                        </div>

                        <!-- Result State -->
                        <div id="resultState" class="hidden w-full h-full flex flex-col items-center justify-center">
                            <!-- Image Container -->
                            <div id="imageContainer" class="sketch-frame relative w-full max-w-lg aspect-square rounded-2xl overflow-hidden mb-8">
                                <img id="resultImage" src="" alt="Sketch reference" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                                <div class="absolute bottom-4 left-4 right-4 flex items-center justify-between">
                                    <span class="text-xs font-mono text-cream-light">AI GENERATED</span>
                                    <span id="difficultyBadge" class="px-3 py-1.5 bg-gradient-to-r from-warm-orange to-coral rounded-full text-xs font-bold text-white">WARM-UP</span>
                                </div>
                            </div>

                            <!-- Prompt Text -->
                            <div class="w-full max-w-2xl">
                                <p id="promptText" class="prompt-text text-xl font-semibold text-center leading-relaxed"></p>
                            </div>
                        </div>

                        <!-- Spinning Animation -->
                        <div id="spinningState" class="hidden">
                            <div class="w-48 h-48 mx-auto mb-8 rounded-full border-4 border-warm-orange/30 border-t-warm-orange animate-spin"></div>
                            <p class="text-charcoal font-medium">Generating your idea...</p>
                        </div>
                    </div>

                    <!-- Spin Button -->
                    <div class="flex items-center justify-center gap-4">
                        <button id="spinBtn" class="btn-primary warm-border px-14 py-6 rounded-2xl font-serif font-semibold text-xl tracking-wide flex items-center gap-3 animate-pulse-glow">
                            <img src="https://unpkg.com/lucide-static@latest/icons/zap.svg" alt="" class="w-6 h-6">
                            SPIN
                        </button>
                        <button id="nextBtn" class="hidden btn-secondary px-8 py-6 rounded-2xl font-semibold text-lg flex items-center gap-2">
                            <img src="https://unpkg.com/lucide-static@latest/icons/chevron-right.svg" alt="" class="w-5 h-5">
                            NEXT
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Action Bar -->
        <div class="action-bar px-6 py-4">
            <div class="flex items-center justify-between max-w-5xl mx-auto">

                <!-- Left: Download/Copy -->
                <div class="flex items-center gap-3">
                    <button id="downloadBtn" class="btn-secondary flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium text-sm" disabled>
                        <img src="https://unpkg.com/lucide-static@latest/icons/download.svg" alt="" class="w-4 h-4">
                        Download
                    </button>
                    <button id="copyPromptBtn" class="btn-secondary flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium text-sm" disabled>
                        <img src="https://unpkg.com/lucide-static@latest/icons/copy.svg" alt="" class="w-4 h-4">
                        Copy Prompt
                    </button>
                </div>

                <!-- Center: Free Spins Badge -->
                <div class="flex items-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-coral/20 to-warm-orange/20 border border-coral/30">
                    <img src="https://unpkg.com/lucide-static@latest/icons/infinity.svg" alt="" class="w-4 h-4 text-coral">
                    <span class="text-sm font-mono text-warm-orange font-medium">FREE SPINS</span>
                </div>

                <!-- Right: Share -->
                <div class="flex items-center gap-3">
                    <button id="sharePinterestBtn" class="flex items-center gap-2 px-5 py-2.5 rounded-xl bg-gradient-to-r from-red-500 to-red-400 hover:from-red-400 hover:to-red-300 text-white font-medium text-sm transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-md" disabled>
                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0C5.373 0 0 5.373 0 12c0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24 12 24c6.627 0 12-5.373 12-12S18.627 0 12 0z"/>
                        </svg>
                        Pinterest
                    </button>
                    <button id="shareTwitterBtn" class="btn-secondary flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium text-sm" disabled>
                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                        Twitter
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-24 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur-xl px-6 py-3 rounded-full text-sm font-semibold flex items-center gap-2 shadow-xl opacity-0 transition-all duration-300 pointer-events-none z-50 border border-light-brown/30">
        <img src="https://unpkg.com/lucide-static@latest/icons/check-circle.svg" alt="" class="w-4 h-4 text-warm-orange">
        <span id="toastText">Copied to clipboard!</span>
    </div>

    <script>
        // State
        let currentDifficulty = 'warmup';
        let currentCategory = 'objects';
        let currentImage = null;
        let currentPrompt = null;
        let spinsCount = 0;
        let savedCount = 0;
        let isSpinning = false;

        // Sample data
        const prompts = {
            warmup: [
                "A single coffee mug from a 45¬∞ angle, steam rising",
                "An apple resting on a wooden table, side view",
                "A closed book with a pen on top, overhead view",
                "A house key on a flat surface, dramatic lighting",
                "A pair of scissors, blades open perspective"
            ],
            sketch: [
                "Character sitting cross-legged reading, 3/4 view",
                "Two hands exchanging a small object, close-up",
                "A street corner with vending machine and bicycle",
                "Cat perched on windowsill, curtains partially open",
                "Multiple mugs stacked at different angles"
            ],
            challenge: [
                "Cyberpunk alleyway at night, neon reflections, rain",
                "Fantasy warrior on cliff edge, dramatic backlight",
                "Abandoned temple overgrown with vines, dappled light",
                "Market scene with 4+ characters, complex spatial depth",
                "Space station interior, multiple light sources, reflections"
            ]
        };

        const unsplashKeywords = {
            objects: 'sketch,still-life',
            animals: 'animal,sketch,wildlife',
            characters: 'person,portrait,character',
            poses: 'pose,gesture,figure',
            landscape: 'landscape,nature,scenery',
            architecture: 'architecture,building,structure',
            scifi: 'futuristic,scifi,technology',
            fantasy: 'fantasy,magical,mythical'
        };

        // DOM Elements
        const difficultyFilters = document.getElementById('difficultyFilters');
        const categoryFilters = document.getElementById('categoryFilters');
        const spinBtn = document.getElementById('spinBtn');
        const nextBtn = document.getElementById('nextBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const copyPromptBtn = document.getElementById('copyPromptBtn');
        const sharePinterestBtn = document.getElementById('sharePinterestBtn');
        const shareTwitterBtn = document.getElementById('shareTwitterBtn');
        const placeholderState = document.getElementById('placeholderState');
        const resultState = document.getElementById('resultState');
        const spinningState = document.getElementById('spinningState');
        const resultImage = document.getElementById('resultImage');
        const promptText = document.getElementById('promptText');
        const difficultyBadge = document.getElementById('difficultyBadge');
        const imageContainer = document.getElementById('imageContainer');
        const spinsCountEl = document.getElementById('spinsCount');
        const savedCountEl = document.getElementById('savedCount');
        const toast = document.getElementById('toast');
        const toastText = document.getElementById('toastText');
        const sparkContainer = document.getElementById('sparkContainer');

        // Event Listeners
        difficultyFilters.addEventListener('click', (e) => {
            const btn = e.target.closest('[data-difficulty]');
            if (!btn) return;

            document.querySelectorAll('#difficultyFilters .filter-chip').forEach(c => {
                c.classList.remove('active');
                c.classList.add('text-charcoal');
            });
            btn.classList.add('active');
            btn.classList.remove('text-charcoal');

            currentDifficulty = btn.dataset.difficulty;
        });

        categoryFilters.addEventListener('click', (e) => {
            const btn = e.target.closest('[data-category]');
            if (!btn) return;

            document.querySelectorAll('#categoryFilters .filter-chip').forEach(c => {
                c.classList.remove('active');
                c.classList.add('text-charcoal');
            });
            btn.classList.add('active');
            btn.classList.remove('text-charcoal');

            currentCategory = btn.dataset.category;
        });

        spinBtn.addEventListener('click', () => {
            if (isSpinning) return;
            spin();
        });

        nextBtn.addEventListener('click', () => {
            if (isSpinning) return;
            spin();
        });

        downloadBtn.addEventListener('click', downloadImage);
        copyPromptBtn.addEventListener('click', copyPrompt);
        sharePinterestBtn.addEventListener('click', () => shareTo('pinterest'));
        shareTwitterBtn.addEventListener('click', () => shareTo('twitter'));

        // Functions
        function spin() {
            isSpinning = true;

            // Show spinning state
            placeholderState.classList.add('hidden');
            resultState.classList.add('hidden');
            spinningState.classList.remove('hidden');

            // Disable buttons
            spinBtn.disabled = true;
            nextBtn.disabled = true;

            // Add shake animation
            imageContainer.classList.add('animate-shake');

            // Generate sparks
            createSparks();

            // Simulate API call
            setTimeout(() => {
                const promptList = prompts[currentDifficulty];
                const randomPrompt = promptList[Math.floor(Math.random() * promptList.length)];
                const keywords = unsplashKeywords[currentCategory];
                const randomId = Math.floor(Math.random() * 1000);
                const imageUrl = `https://images.unsplash.com/photo-${1500000000000 + randomId}?auto=format&fit=crop&w=800&h=800&q=80&keywords=${keywords}`;

                currentImage = imageUrl;
                currentPrompt = randomPrompt;

                // Update UI
                resultImage.src = imageUrl;
                promptText.textContent = randomPrompt;
                difficultyBadge.textContent = currentDifficulty.toUpperCase().replace('-', ' ');

                // Show result with animation
                spinningState.classList.add('hidden');
                resultState.classList.remove('hidden');
                resultState.classList.add('animate-slot-spin');

                // Update stats
                spinsCount++;
                spinsCountEl.textContent = spinsCount;

                // Enable action buttons
                downloadBtn.disabled = false;
                copyPromptBtn.disabled = false;
                sharePinterestBtn.disabled = false;
                shareTwitterBtn.disabled = false;

                // Show next button
                nextBtn.classList.remove('hidden');

                // Re-enable spin button
                spinBtn.disabled = false;
                isSpinning = false;

                // Remove animation class after it completes
                setTimeout(() => {
                    resultState.classList.remove('animate-slot-spin');
                    imageContainer.classList.remove('animate-shake');
                }, 500);

            }, 800);
        }

        function createSparks() {
            const colors = ['#e67e5c', '#ff6b4a', '#c4b5a0', '#ff8a6e'];
            const sparkCount = 15;

            for (let i = 0; i < sparkCount; i++) {
                setTimeout(() => {
                    const spark = document.createElement('div');
                    spark.className = 'spark-particle';
                    spark.style.left = Math.random() * 100 + '%';
                    spark.style.top = Math.random() * 100 + '%';
                    spark.style.background = colors[Math.floor(Math.random() * colors.length)];
                    spark.style.animation = 'spark 0.8s ease-out forwards';
                    sparkContainer.appendChild(spark);

                    setTimeout(() => spark.remove(), 800);
                }, i * 40);
            }
        }

        function downloadImage() {
            if (!currentImage) return;

            const link = document.createElement('a');
            link.href = currentImage;
            link.download = `sketch-idea-${currentDifficulty}-${Date.now()}.jpg`;
            link.target = '_blank';
            link.click();

            showToast('Image downloaded!');
            savedCount++;
            savedCountEl.textContent = savedCount;
        }

        function copyPrompt() {
            if (!currentPrompt) return;

            navigator.clipboard.writeText(currentPrompt).then(() => {
                showToast('Prompt copied to clipboard!');
            });
        }

        function shareTo(platform) {
            if (!currentImage || !currentPrompt) return;

            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`Just generated this sketch idea: "${currentPrompt}" via Sketch Ideas!`);
            const imageUrl = encodeURIComponent(currentImage);

            let shareUrl = '';

            if (platform === 'pinterest') {
                shareUrl = `https://pinterest.com/pin/create/button/?url=${url}&media=${imageUrl}&description=${text}`;
            } else if (platform === 'twitter') {
                shareUrl = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
            }

            window.open(shareUrl, '_blank', 'width=600,height=400');
        }

        function showToast(message) {
            toastText.textContent = message;
            toast.style.opacity = '1';
            toast.style.transform = 'translate(-50%, 0)';

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translate(-50%, 20px)';
            }, 2000);
        }
    </script>
</body>
</html>
